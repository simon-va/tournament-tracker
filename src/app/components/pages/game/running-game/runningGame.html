<mat-tab-group mat-stretch-tabs="false">
  <mat-tab label="Spiel">
    <mat-stepper orientation="vertical" #stepper>
      @if (runningGame(); as game) {
        @for (round of game.roundsToPlay; track $index) {
          <mat-step>
            <ng-template matStepLabel>Runde {{ $index + 1 }}</ng-template>
            <strong>Team 1</strong>
            <div class="team-points">
              <app-counter
                [ngModel]="getRoundPoints($index, 'team1')"
                (ngModelChange)="updateRoundPoints($index, 'team1', $event)"
                [minNumber]="0"
              />
              @if (game?.usePointLimit) {
                <div class="fast-end">
                  <button
                    mat-icon-button
                    (click)="setWinner($index, 'team1', game?.points ?? 0)"
                    [disabled]="round.winnerTeamId"
                    [ngClass]="{
                      'button-disabled':
                        round.winnerTeamId && round.winnerTeamId !== 1,
                    }"
                  >
                    <mat-icon fontIcon="celebration"></mat-icon>
                  </button>
                </div>
              }
            </div>
            <mat-divider></mat-divider>
            <strong>Team 2</strong>
            <div class="team-points">
              <app-counter
                [ngModel]="getRoundPoints($index, 'team2')"
                (ngModelChange)="updateRoundPoints($index, 'team2', $event)"
                [minNumber]="0"
              />
              @if (game?.usePointLimit) {
                <div class="fast-end">
                  <button
                    mat-icon-button
                    (click)="setWinner($index, 'team2', game?.points ?? 0)"
                    [disabled]="round.winnerTeamId"
                    [ngClass]="{
                      'button-disabled':
                        round.winnerTeamId && round.winnerTeamId !== 2,
                    }"
                  >
                    <mat-icon fontIcon="celebration"></mat-icon>
                  </button>
                </div>
              }
            </div>

            @if ($last) {
              <div class="complete-game-section">
                <button matButton="filled" (click)="completeGame()">
                  Spiel abschlie√üen
                </button>
              </div>
            }
          </mat-step>
        }
      }
    </mat-stepper>
  </mat-tab>
  <mat-tab label="Einstellungen">
    <div style="margin: 1rem 0"><app-game-settings /></div>
  </mat-tab>
</mat-tab-group>
